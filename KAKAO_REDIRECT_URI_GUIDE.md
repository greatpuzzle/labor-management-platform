# 카카오 로그인 리다이렉트 URI 등록 가이드

## 리다이렉트 URI 등록 방법

### 1. 카카오 개발자 콘솔 접속
- URL: https://developers.kakao.com/
- 카카오 계정으로 로그인

### 2. 애플리케이션 선택
- **내 애플리케이션** 메뉴 클릭
- 생성한 애플리케이션 선택 (예: "장애인 근로관리")

### 3. 카카오 로그인 설정으로 이동
1. 왼쪽 메뉴에서 **제품 설정** 클릭
2. **카카오 로그인** 메뉴 클릭

### 4. Redirect URI 등록
1. **Redirect URI** 섹션 찾기
2. **Redirect URI 등록** 버튼 클릭
3. 다음 URI들을 **하나씩** 추가:

   **프로덕션 환경:**
   ```
   http://43.200.44.109:3001
   ```

   **개발 환경:**
   ```
   http://localhost:5174
   ```

4. 각 URI 입력 후 **저장** 버튼 클릭

### 5. 플랫폼 설정 (Web 플랫폼)
1. 왼쪽 메뉴에서 **앱 설정** 클릭
2. **플랫폼** 메뉴 클릭
3. **Web 플랫폼** 추가:
   - **사이트 도메인** 입력:
     ```
     http://43.200.44.109:3001
     ```
   - 또는 개발 환경:
     ```
     http://localhost:5174
     ```
4. **저장** 버튼 클릭

### 6. 카카오 로그인 활성화 확인
1. **제품 설정** → **카카오 로그인** 메뉴로 이동
2. **활성화 설정**에서 **카카오 로그인**이 **ON**인지 확인
3. OFF라면 **활성화** 버튼 클릭

### 7. 동의 항목 설정
1. **제품 설정** → **카카오 로그인** → **동의항목** 메뉴로 이동
2. **전화번호** 항목 찾기
3. **필수 동의**로 설정 ✅
   - 전화번호는 근로자 매칭에 필수입니다

## 등록해야 할 URI 목록

### 프로덕션 환경
```
http://43.200.44.109:3001
```

### 개발 환경
```
http://localhost:5174
```

## 주의사항

1. **정확한 형식**
   - `http://` 또는 `https://` 포함
   - 포트 번호 포함 (`:3001`, `:5174`)
   - 마지막에 `/` 없이 입력

2. **프로덕션과 개발 환경 모두 등록**
   - 프로덕션: `http://43.200.44.109:3001`
   - 개발: `http://localhost:5174`

3. **저장 후 적용 시간**
   - URI 등록 후 즉시 적용됩니다
   - 변경 사항이 반영되지 않으면 브라우저 캐시 삭제

## 환경 변수 설정

### 모바일 앱 환경 변수 설정

`apps/mobile/.env` 파일 생성 또는 수정:

```env
# 카카오 JavaScript SDK 키
VITE_KAKAO_JS_KEY=4fd9be15675f83e1a441b25724837d57
```

## 설정 완료 체크리스트

- [ ] 카카오 개발자 콘솔 접속
- [ ] 애플리케이션 선택
- [ ] Web 플랫폼 등록 (`http://43.200.44.109:3001`)
- [ ] Redirect URI 등록 (`http://43.200.44.109:3001`)
- [ ] Redirect URI 등록 (`http://localhost:5174`) - 개발용
- [ ] 카카오 로그인 활성화 확인
- [ ] 전화번호 동의 항목 필수로 설정
- [ ] `apps/mobile/.env`에 JavaScript 키 설정
- [ ] 모바일 앱 재시작 또는 재배포

## 테스트 방법

1. **모바일 앱 접속**
   - `http://43.200.44.109:3001` 접속

2. **카카오 로그인 버튼 클릭**
   - "카카오로 로그인" 버튼 클릭

3. **카카오 로그인 팝업 확인**
   - 카카오 로그인 팝업이 표시되는지 확인
   - 로그인 후 리다이렉트되는지 확인

4. **오류 발생 시**
   - 브라우저 콘솔에서 오류 메시지 확인
   - Redirect URI가 정확히 등록되었는지 확인
   - JavaScript 키가 올바른지 확인

## 문제 해결

### "redirect_uri_mismatch" 오류
- **원인**: 등록한 Redirect URI와 실제 사용하는 URI가 다름
- **해결**: 
  1. 카카오 개발자 콘솔에서 등록한 URI 확인
  2. 실제 앱 URL과 정확히 일치하는지 확인
  3. 포트 번호, 프로토콜(`http`/`https`) 확인

### "invalid_client" 오류
- **원인**: JavaScript 키가 잘못되었거나 앱이 활성화되지 않음
- **해결**: 
  1. JavaScript 키 확인 (`4fd9be15675f83e1a441b25724837d57`)
  2. 카카오 로그인이 활성화되어 있는지 확인

### 카카오 로그인 팝업이 안 뜸
- **원인**: JavaScript 키가 설정되지 않았거나 SDK 초기화 실패
- **해결**: 
  1. `apps/mobile/.env` 파일 확인
  2. 브라우저 콘솔에서 오류 메시지 확인
  3. 모바일 앱 재시작

---

**설정 완료 후 모바일 앱을 재배포하거나 재시작해야 환경 변수가 적용됩니다!**
